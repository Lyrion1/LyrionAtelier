<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oracle Readings | LyrÄ«on Atelier</title>
  <link rel="icon" type="image/png" href="images/favicon/favicon.png">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <a class="skip-to-content" href="#main-content">Skip to main content</a>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="index.html">
        <img class="brand-logo" src="images/logo/GOD.PNG" alt="LyrÄ«on Atelier logo">
        <span class="brand-name">LyrÄ«on Atelier</span>
      </a>
      <nav aria-label="Main navigation">
        <ul class="nav">
          <li><a href="index.html">Home</a></li>
          <li><a href="shop.html">Shop</a></li>
          <li><a href="oracle.html">Oracle</a></li>
          <li><a href="codex.html">Codex</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
      <div class="header-actions">
        <a class="cart-icon" href="cart.html" aria-label="Shopping cart">ğŸ›’ <span class="cart-count">0</span></a>
        <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">â˜°</button>
      </div>
    </div>
  </header>

  <main id="main-content" class="section">
    <div class="container">
      <div class="section-title">
        <p class="pill">Oracle studio</p>
        <h1>Book a guided reading</h1>
        <p class="muted">Choose a spread, align with your sign, and receive a personalized message.</p>
      </div>
      <section class="trust-signals">
        <div class="trust-container">
          <div class="trust-item">
            <div class="icon">â­</div>
            <p class="stat">500+</p>
            <p class="label">Readings Delivered</p>
          </div>

          <div class="trust-item">
            <div class="icon">ğŸŒ™</div>
            <p class="stat">4.9/5</p>
            <p class="label">Average Rating</p>
          </div>

          <div class="trust-item">
            <div class="icon">ğŸ”®</div>
            <p class="stat">24-48hr</p>
            <p class="label">Typical Delivery</p>
          </div>

          <div class="trust-item">
            <div class="icon">âœ¨</div>
            <p class="stat">100%</p>
            <p class="label">Satisfaction Rate</p>
          </div>
        </div>
      </section>
      <div class="oracle-grid" id="oracle-grid"></div>
    </div>
  </main>

  <section class="section lantern-cta fade-in-on-scroll">
    <div class="lantern-glow"></div>
    <div class="container lantern-card">
      <div>
        <p class="pill">Offer a light</p>
        <h2>Light a lantern for our interceders</h2>
        <p class="muted">A quiet, voluntary donation that fuels the keepers who pray, divine, and hold space for wishes around the world.</p>
      </div>
      <a class="lantern-button" href="contact.html#donations" aria-label="Light a lamp to donate">
        <img src="images/oracle/the-oracles-lantern-cover.png" alt="The Oracle's Lantern">
        <span>Light a lamp</span>
      </a>
    </div>
  </section>

  <footer class="footer">
    <div class="container footer-inner">
      <div><strong class="brand-name">LyrÄ«on Atelier</strong></div>
      <div class="muted"><a href="contact.html">Have a question?</a></div>
    </div>
  </footer>

  <script src="js/products.js" defer></script>
  <script src="js/cart.js" defer></script>
  <script src="js/main.js" defer></script>
  <script>
  // Product data for each oracle reading
  const oracleProducts = {
  'natal-chart': {
  name: 'Natal Chart Blueprint - Oracle Reading',
  price: 70.00,
  description: 'Foundational chart read with practical activations'
  },
  'solar-return': {
  name: 'Solar Return Reading - Oracle Reading',
  price: 58.00,
  description: 'Birthday-year forecast covering themes and opportunities'
  },
  'life-path': {
  name: 'Life Path Reading - Oracle Reading',
  price: 50.00,
  description: 'Identify your current chapter and its lessons'
  },
  'relationship': {
  name: 'Relationship Synastry - Oracle Reading',
  price: 88.00,
  description: 'Compatibility and dynamics between two charts'
  },
  'career': {
  name: 'Career & Purpose Reading - Oracle Reading',
  price: 75.00,
  description: 'Vocational guidance and life purpose insights'
  },
  'cosmic-blueprint': {
  name: 'Full Cosmic Blueprint - Oracle Reading',
  price: 155.00,
  description: 'Comprehensive analysis combining all aspects'
  }
  };

  // Handle book button clicks
  async function handleBookClick(event, productKey) {
  const product = oracleProducts[productKey];

  if (!product) {
  console.error('Product not found:', productKey);
  return;
  }

  // Show loading state
  const button = event.target;
  const originalText = button.textContent;
  button.textContent = 'Processing...';
  button.disabled = true;

  try {
  // Create checkout session
  const response = await fetch('/.netlify/functions/create-checkout-session', {
  method: 'POST',
  headers: {
  'Content-Type': 'application/json',
  },
  body: JSON.stringify({
  productName: product.name,
  productPrice: product.price,
  }),
  });

  const data = await response.json();

  if (data.error) {
  throw new Error(data.error);
  }

  // Redirect to Stripe Checkout
  window.location.href = data.url;

  } catch (error) {
  console.error('Error:', error);
  alert('Sorry, there was an error processing your request. Please try again.');
  button.textContent = originalText;
  button.disabled = false;
  }
  }

  // Add click handlers to all book buttons
  document.addEventListener('DOMContentLoaded', () => {
  // Add data-product attributes to book buttons in HTML, then:
  const bookButtons = document.querySelectorAll('[data-product]');
  bookButtons.forEach(button => {
  button.addEventListener('click', (e) => {
  e.preventDefault();
  const productKey = button.getAttribute('data-product');
  handleBookClick(e, productKey);
  });
  });
  });
  </script>
</body>
</html>
